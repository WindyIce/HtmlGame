{"version":3,"sources":["Snake.js"],"names":[],"mappings":"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","file":"Snake-compile.js","sourcesContent":["class Snake{\r\n    constructor(width,height,colorHead,colorBody,position,relativelyMap){\r\n        this.width=width;\r\n        this.height=height;\r\n        this.colorHead=colorHead;\r\n        this.colorBody=colorBody;\r\n        this.position=position;\r\n        this.direct='';\r\n        this.dom=relativelyMap.dom;//不要进行任何对这个dom的修改！！这是为了定位\r\n        this.maxX=relativelyMap.width/this.width;\r\n        this.maxY=relativelyMap.height/this.height;\r\n        this.body=[new SnakeBody(6,2,this.colorHead),\r\n            new SnakeBody(5,2,this.colorBody),\r\n            new SnakeBody(4,2,this.colorBody)];\r\n        this.initLength=this.body.length;\r\n        this.nowLength=this.initLength;\r\n        this.isAlive=true;\r\n    }\r\n    setDirection(code){\r\n        switch(code) {\r\n            case 37:\r\n                if(this.direct!=='right')\r\n                    this.direct = 'left';\r\n                break;\r\n            case 38:\r\n                if(this.direct!=='down')\r\n                    this.direct = 'up';\r\n                break;\r\n            case 39:\r\n                if(this.direct!=='left')\r\n                    this.direct = 'right';\r\n                break;\r\n            case 40:\r\n                if(this.direct!=='up')\r\n                    this.direct = 'down';\r\n                break;\r\n        }\r\n    }\r\n    show(){\r\n        for(let i=0;i<this.body.length;i++){\r\n            let eachBody=this.body[i];\r\n            if(eachBody.dom==null){\r\n                eachBody.dom=document.createElement('div');\r\n                eachBody.dom.style.width=this.width+'px';\r\n                eachBody.dom.style.height=this.height+'px';\r\n                eachBody.dom.style.position=this.position;\r\n                eachBody.dom.style.backgroundColor=eachBody.color;\r\n                this.dom.appendChild(eachBody.dom);\r\n            }\r\n            eachBody.dom.style.left=this.width*eachBody.x+'px';\r\n            eachBody.dom.style.top=this.height*eachBody.y+'px';\r\n        }\r\n    }\r\n    move(food){\r\n        //处理除了第一节的所有蛇身，让后面的坐标等于前面的\r\n        for(let i=this.body.length-1;i>0;i--){\r\n            this.body[i].x=this.body[i-1].x;\r\n            this.body[i].y=this.body[i-1].y;\r\n        }\r\n        //处理第一节蛇身\r\n        switch (this.direct){\r\n            case'up':\r\n                this.body[0].y--;\r\n                break;\r\n            case'down':\r\n                this.body[0].y++;\r\n                break;\r\n            case'left':\r\n                this.body[0].x--;\r\n                break;\r\n            case'right':\r\n                this.body[0].x++;\r\n                break;\r\n            default:return;\r\n        }\r\n        //是否撞墙\r\n        if(this.body[0].x<0||this.body[0].x>=this.maxX||\r\n            this.body[0].y<0||this.body[0].y>=this.maxY){\r\n            this.isAlive=false;\r\n        }\r\n        //是否吃到自己\r\n        for(let i=1;i<this.body.length;i++){\r\n            if(this.body[0].x===this.body[i].x&&\r\n                this.body[0].y===this.body[i].y){\r\n                this.isAlive=false;\r\n                break;\r\n            }\r\n        }\r\n        //是否吃到食物\r\n        if(this.body[0].x===food.x&&this.body[0].y===food.y){\r\n            const x=this.body[this.body.length-1].x;\r\n            const y=this.body[this.body.length-1].y;\r\n            this.nowLength++;\r\n            this.body.push(new SnakeBody(x,y,this.colorBody));\r\n            food.show();\r\n        }\r\n        this.show();\r\n    }\r\n}\r\n\r\nclass SnakeBody{\r\n    constructor(x,y,color){\r\n        this.x=x;\r\n        this.y=y;\r\n        this.color=color;\r\n        this.dom=null;\r\n    }\r\n}"]}