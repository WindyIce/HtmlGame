{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compile.js","sourcesContent":["var chessboard;\r\nvar canvas;\r\nwindow.onload = function () {\r\n    canvas = document.getElementById('chessboard');\r\n    chessboard = new ChessBoard1(495, 495, 'absolute', 'yellow', document.getElementsByTagName('body')[0], canvas, 15);\r\n    chessboard.show(\"images/wood.jpg\");\r\n    var quitFunction = function (winner) {\r\n        alert(winner.toUpperCase() + '  WINS');\r\n        location.reload();\r\n    };\r\n    window.onclick = function (e) {\r\n        var x = getCanvasPos(canvas, e).x;\r\n        var y = getCanvasPos(canvas, e).y;\r\n        chessboard.move(x, y, quitFunction);\r\n    };\r\n};\r\nfunction getCanvasPos(canvas, e) {\r\n    var rect = canvas.getBoundingClientRect();\r\n    return {\r\n        x: e.clientX - rect.left * (canvas.width / rect.width),\r\n        y: e.clientY - rect.top * (canvas.height / rect.height)\r\n    };\r\n}\r\nvar ChessBoard1 = /** @class */ (function () {\r\n    function ChessBoard1(width, height, position, color, relativelyDom, canvasDom, numOfchess) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.position = position;\r\n        this.color = color;\r\n        this.relativelyDom = relativelyDom;\r\n        this.canvasDom = canvasDom;\r\n        this.numOfchess = numOfchess;\r\n        this.chesses = [];\r\n        this.eachChess = [];\r\n        this.context = canvasDom.getContext(\"2d\");\r\n        for (var i = 0; i < numOfchess; i++) {\r\n            this.chesses[i] = [];\r\n            for (var j = 0; j < numOfchess; j++) {\r\n                this.chesses[i][j] = new chess(i, j, null, this.context, width / numOfchess, height / numOfchess);\r\n            }\r\n        }\r\n        this.step = 0;\r\n    }\r\n    ChessBoard1.prototype.back1 = function () {\r\n        //设置高和宽\r\n        this.canvasDom.width = this.width;\r\n        this.canvasDom.height = this.height;\r\n        //获取棋盘材质\r\n        this.context = this.canvasDom.getContext(\"2d\");\r\n        this.context.strokeStyle = \"black\";\r\n        this.context.strokeRect(0, 0, this.width, this.height);\r\n        var pattern = this.context.createPattern(this.image, 'repeat');\r\n        this.context.fillStyle = pattern;\r\n        this.context.fillRect(0, 0, this.width, this.height);\r\n        this.drawChessBoardLines(15);\r\n        var last = this.eachChess.pop();\r\n        var x = last.x;\r\n        var y = last.y;\r\n        this.chesses[x][y].color = null;\r\n        this.step = 0;\r\n        for (var i = 0; i < this.eachChess.length; i++) {\r\n            this.eachChess[i].draw(this.context);\r\n            this.step++;\r\n        }\r\n    };\r\n    ChessBoard1.prototype.checkWinner = function (x, y) {\r\n        for (var i = -4; i <= 0; i++) {\r\n            try {\r\n                // 防止越界\r\n                if (x + 4 < 15) {\r\n                    // 横着连成五个\r\n                    if (this.chesses[x + i][y].color === this.chesses[x + i + 1][y].color &&\r\n                        this.chesses[x + i][y].color === this.chesses[x + i + 2][y].color &&\r\n                        this.chesses[x + i][y].color === this.chesses[x + i + 3][y].color &&\r\n                        this.chesses[x + i][y].color === this.chesses[x + i + 4][y].color) {\r\n                        if (this.step % 2 == 0)\r\n                            return 'black';\r\n                        else\r\n                            return 'white';\r\n                    }\r\n                }\r\n                if (y + 4 < 15) {\r\n                    // 竖着连成五个\r\n                    if (this.chesses[x][y + i].color === this.chesses[x][y + i + 1].color &&\r\n                        this.chesses[x][y + i].color === this.chesses[x][y + i + 2].color &&\r\n                        this.chesses[x][y + i].color === this.chesses[x][y + i + 3].color &&\r\n                        this.chesses[x][y + i].color === this.chesses[x][y + i + 4].color) {\r\n                        if (this.step % 2 == 0)\r\n                            return 'black';\r\n                        else\r\n                            return 'white';\r\n                    }\r\n                }\r\n                if (x + 4 < 15 && y + 4 < 15) {\r\n                    // 左上到右下\r\n                    if (this.chesses[x + i][y + i].color === this.chesses[x + i + 1][y + i + 1].color &&\r\n                        this.chesses[x + i][y + i].color === this.chesses[x + i + 2][y + i + 2].color &&\r\n                        this.chesses[x + i][y + i].color === this.chesses[x + i + 3][y + i + 3].color &&\r\n                        this.chesses[x + i][y + i].color === this.chesses[x + i + 4][y + i + 4].color) {\r\n                        if (this.step % 2 == 0)\r\n                            return 'black';\r\n                        else\r\n                            return 'white';\r\n                    }\r\n                }\r\n                if (x - 4 >= 0 && y + 4 < 15) {\r\n                    // 左下到右上\r\n                    if (this.chesses[x - i][y + i].color === this.chesses[x - i - 1][y + i + 1].color &&\r\n                        this.chesses[x - i][y + i].color === this.chesses[x - i - 2][y + i + 2].color &&\r\n                        this.chesses[x - i][y + i].color === this.chesses[x - i - 3][y + i + 3].color &&\r\n                        this.chesses[x - i][y + i].color === this.chesses[x - i - 4][y + i + 4].color) {\r\n                        if (this.step % 2 == 0)\r\n                            return 'black';\r\n                        else\r\n                            return 'white';\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        return 'no';\r\n    };\r\n    ChessBoard1.prototype.move = function (absoluteX, absoluteY, quitFunction) {\r\n        //获得真实的XY\r\n        var x = Math.floor(absoluteX / (this.width / this.numOfchess));\r\n        console.log('x' + x);\r\n        var y = Math.floor(absoluteY / (this.height / this.numOfchess));\r\n        console.log('y' + y);\r\n        var color;\r\n        //判断是黑棋还是白\r\n        if (this.step % 2 == 0)\r\n            color = 'black';\r\n        else\r\n            color = 'white';\r\n        this.chesses[x][y].color = color;\r\n        this.chesses[x][y].draw(this.context);\r\n        var winner = this.checkWinner(x, y); //TODO: finish the winner checker\r\n        if (winner != 'no')\r\n            quitFunction(winner);\r\n        var theChess = new chess(x, y, color, this.context, this.width / this.numOfchess, this.height / this.numOfchess);\r\n        this.eachChess[this.eachChess.length] = theChess;\r\n        ++this.step;\r\n    };\r\n    ChessBoard1.prototype.show = function (src) {\r\n        //设置高和宽\r\n        this.canvasDom.width = this.width;\r\n        this.canvasDom.height = this.height;\r\n        //获取棋盘材质\r\n        this.textureSrc = src;\r\n        var img = new Image();\r\n        img.src = src;\r\n        this.image = img;\r\n        this.context = this.canvasDom.getContext(\"2d\");\r\n        this.context.strokeStyle = \"black\";\r\n        this.context.strokeRect(0, 0, this.width, this.height);\r\n        var pattern = this.context.createPattern(img, 'repeat');\r\n        this.context.fillStyle = pattern;\r\n        this.context.fillRect(0, 0, this.width, this.height);\r\n        this.drawChessBoardLines(15);\r\n    };\r\n    ChessBoard1.prototype.drawChessBoardLines = function (rows) {\r\n        var eachWidth = this.width / rows;\r\n        var eachHeight = this.height / rows;\r\n        for (var i = 0; i < rows; i++) {\r\n            this.context.moveTo(0, eachHeight * i);\r\n            this.context.lineTo(this.width, eachHeight * i);\r\n            this.context.stroke();\r\n            this.context.moveTo(eachWidth * i, 0);\r\n            this.context.lineTo(eachHeight * i, this.height);\r\n            this.context.stroke();\r\n        }\r\n    };\r\n    return ChessBoard1;\r\n}());\r\nvar chess = /** @class */ (function () {\r\n    //color 可以为空，就是该位置没有棋子\r\n    function chess(x, y, color, context, width, height) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.color = color;\r\n        this.context = context;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    chess.prototype.draw = function (context) {\r\n        if (this.color === null) {\r\n            return;\r\n        }\r\n        var left = this.x * this.width + this.width / 2;\r\n        var top = this.y * this.height + this.height / 2;\r\n        if (this.color == \"black\") {\r\n            context.strokeStyle = \"#000000\";\r\n            context.fillstyle = \"#000000\";\r\n        }\r\n        else if (this.color == \"white\") {\r\n            context.strokeStyle = \"#ffffff\";\r\n            context.fillstyle = \"#ffffff\";\r\n        }\r\n        context.beginPath();\r\n        context.arc(left, top, this.width / 4 - 1, 0, Math.PI * 2, true);\r\n        context.closePath();\r\n        context.fill();\r\n        context.lineWidth = this.width / 2 - 1;\r\n        context.stroke();\r\n    };\r\n    return chess;\r\n}());\r\n"]}